# 5. Makecode Tutorial

## 5.1 Install IDE

Micro:bit is a product that requires no IDE installation and only needs
to download the programming from the web: [Microsoft MakeCode for micro:bit (microbit.org)](https://makecode.microbit.org/)

If you need an offline version, refer to the "Offline Makecode" file

## 5.2 Install the Driver

refer to the “4. Install Microbit Driver”file

![](media/4abbe9f78ea4446fb85c7c7f77a4d0b9.png)

## 5.3 IDE Setting and Introduction of the Toolbar

Enter website：[Microsoft MakeCode for micro:bit (microbit.org)](https://makecode.microbit.org/)

![](media/c95790d808ab26e07d6d3cc1856d2f87.png)

If your want to import the existing code, tap"Import" → "Import file"→"continue".

If you need to write your own code, click on the New Project and enter the project name.

![](media/b0a030d5638344201c3bec4fba670561.png)

① Code block area: we can see it subdivided into multiple columns, each
column contains the corresponding code blocks, which are described at
the website：<u>https://makecode.microbit.org/reference.</u>

② Code writing area:Our code is completed in this area. There are two
code blocks in the newly created project.

③ Programming environment setting area: We can set up the language of
the development environment and import the library files we need.

④ Project name

⑤ Download button of projects

## 5.4 Download Code

Enter”Basic”→ ”show icon“ → ”forever“

![](media/3f273e871c63d27b539df248dc77996c.png)
![](media/46235458ac95c51bae7a5e636d60e262.png)

Tap![](media/ef64143ab716efab13958beb011ee738.png)Windows 10 computers can download it directly to the microbit development board.

Windows 7 computers need to find the downloaded code and select "Send to" microbit![](media/d608986784e05c070337f5b17035f990.png) or copy and paste.

If the computer does not display ![](media/2bf00e2996d36dd45cf760831c85014a.png) please check according to the five files.

![](media/ee395bbc7057696c1dd8bcfef7fadb73.png)

## 5.5 Import Code

Connect the micro:bit development board to your computer via a USB cable, then open the online makecode programming page and tap Import.

![](media/211a43de1c8477c3f536841d04e2cd57.png)

Then click Add Folder, select the code file you want to add, and tap "Go ahead" to add the code to the online compiler.

![](media/e08a6d5bb3ef99e54cf8096dc392e416.png)
![](media/d9a16d8d7aed3dcfc0b7bab95fdd3d19.png)

![](media/5cd1a8270620c108e0172201ed567694.png)

## 5.6 Install the Library File

Import makecode Or add the code manually:

Tap Extensions

![](media/c6b984c70f45a5255df51f7f72b78aae.png)

Enter the link in the search box, and then click on the library file
named Mini Car.

![](media/3b440705fcdd683746eb172c4ed0b5fb.png)

![](media/0cb95a94938c5a8f8c3d9b0c36456fd4.png)

Offline Makecode

Download Link:

<https://makecode.microbit.org/offline-app>

![](media/dc75b347a3e73481af9eb4d7e53718e9.png)

## 5.7 Update Tutorial:

First, open the software and click Settings in the upper right corner and then click About.

![](media/85b33202472fbf00777db9cd784c3e52.jpeg)


Then go to the About interface and click the latest version

![](media/9d572efe69e28b2ddaa747870c9460ca.png)

The official website of the software will be redirected

![](media/c7a2ec0f4908fcab5052bb42ca58840c.png)

Slide all the way to the bottom, such as My System is windows, then select Windows to download.

![](media/33ea6c1811c604466b6278353b20ea8c.png)



## 5.8  Microbit Basic Projects

### Project 1: Heartbeat

1. Description

The sensor modules and LED dot matrix of the Microbit basic projec omes with the micro: bit mainboard.

Prepare a Micro:bit board and a USB cable. Next we will conduct a basi xperiment that a heartbeat pattern flashes on the micro:bit board.

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

1)  Go to“Basic”→“show icon”.

2)  Copy it again and place into“forever”block.

3)  Click“![](media/956fa1d262cebf7656f8ab8a6dd7e5e8.png)”t    select“![](media/3765302c4b97e093d22085d02de6cbb8.png)”.

![](media/ff41bc3df76e580ea51abb79c9f56ba7.png)

Complete Program：

![](media/956fa1d262cebf7656f8ab8a6dd7e5e8.png)![](media/3765302c4b97e093d22085d02de6cbb8.png)

![](media/ff41bc3df76e580ea51abb79c9f56ba7.png)

Click“JavaScript" to view the corresponding JavaScript code:

![](media/32e69bb2fc03fc9fcdb472db5798b2a2.png)

4. Test Result

Download code to the micro:bit and plug in it via a USB cable. The LE ot matrix will display
![](media/14472c7e1c80818889bb47bfc709f053.png) and![](media/3765302c4b97e093d22085d02de6cbb8.png).

If download unsuccessfully, disconnect the micro:bit and reboot it

![](media/172827cdf8056b4ecc7692467ca5a751.png)![](media/5a5c8c2e3e1adb106905863f7da68f78.png)





### Project 2 Light Up A Single LED

1. Description

Micro:bit motherboard consists of 25 light-emitting diodes, 5 pcs in  roup, which correspond to x and y axis, forging a 5\*5 matrix oreover, every diode locates at the point of x and y axis.

Virtually, we could control an LED by setting coordinate points. Fo nstance, set coordinate point（0，0）to turn on the LED at row 1 an olumn 1; light up LED at the row 1 and column 3, we could set （2，0 nd so on.

![](media/a44f7625e2b1d61819bfc1985c321796.png)

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

1)  A. Click“Led”→“more”→“led enable false”

B. Put it into the“on start”block, click the drop-down triangle butto  elect“true”.![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

\(2\) A. Enter“Led”→“toggle x 0 y 0”block;

B. Combine it with“forever”，alter“x 0”to“x 1”.

![](media/70e6ac6cc25d9f0f313c670383c718dd.png)

\(3\) A. Enter“Basic”→“pause (ms) 100”from“

B. Then move it below the“toggle x1 y0”block, and set the delay time t 00ms.![](media/b3cf902a00a442590d9e81b3d963b856.png)

\(4\) Duplicate cod tring![](media/a19713fcfe99bbdc3b7d2448e42d3b47.png)onc nd place it into“forever”block.

![](media/6fa24a7c1348d775f70f3c3e65294091.png)

\(5\) A. Enter“Led”→“plot x 0 y 0”

B. Keep it beneath block“pause(ms)500”, then set to“plot x 3 y 4”.

![](media/2d573bedbe650cae075dea31bfd509a4.png)

\(6\) Replicate“pause (ms) 500”once and keep it below the block“plo 3y4”

![](media/14aa140cf450499f11035dc8313bd83c.png)

Click“Led”→“unplot x 0 y 0”and set to“unplot x3 y 4”;

Lay down it beneath“pause (ms) 500”block

Copy“pause (ms) 500”block once, and keep it below the“unplot x3 y  lock.

![](media/523b04d16b1e2755b488b05a82c6da71.png)

Complete Program：

![](media/cfd2099318bfdf76c818e66b192b4319.png)

4. Test Result

Upload program and plug in micro:bit via USB port, the LED at coordinat oint (1,0) flashes for 0.5s, then the LED at (3,4）blinks for 0.5s lternately.

![](media/02bc184f70538ce97db32d52f89080ac.png)![](media/d81896e508324f8daf32dbdfe1de20b6.png)





### Project 3: 5 x 5 LED Dot Matrix

1. Description

Dot matrix gains popularity in our life, such as LED screen, bus statio nd the mini TV in the lift.

The dot matrix of Micro:bit board consists of 25 light emitting diodes n previous lesson, we control LED of Micro:bit board to form patterns umbers and character strings by setting the coordinate points oreover, we could adopt another way to complete the display o atterns, numbers and character strings.

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code 1：

Enter“Led”→“more”→“led enable false”

Put it into the“on start”block

Click the drop-down triangle button to select“true”

![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

Click“Led”to move“plot x 0 y 0”into“forever”, then replicate“plot x 0  ”for 8 times, respectively set to“x 2”y 0”,“ ”y 1”,“x 2”y 2”,“x 2”y 3”,“x 2”y 4”,“x 1”y 3”“x 0”y 2”,“x 3”y 3”,“x 4” ”.

![](media/d44a44c5708aa9ea67a70220d3afde02.png)

Complete Program：


![](media/d44a44c5708aa9ea67a70220d3afde02.png)



Code 2：

1)  A. Enter“Basic”→“show number 0”block,

2.  Duplicate it for 4 times, then separately set to“show numbe    1”,“show number 2”,“show number 3”,“show number 4”,“show number 5”.

![](media/5b8bc5bbc3f5e84aeb19d4dc7d7d2ffd.png)

2)  Click“Basic”→“show leds”, then put it into“on start”block，tick blu    boxes to light LED and generate“↓”pattern.

![](media/9c1ecc0a6db98f37533c9deec935b717.png)

3)  Move out the block“show string” from“Basic”block, and leave i    beneath the“show leds” block

![](media/3f638ac0f3f088a2adefa1ad17cea38a.png)

Choose“show icon” from“Basic”block, and leave it beneath the block“sho tring“Hello!”block

![](media/e989a69cc6fea0a3faa6c1f491b40e69.png)

Enter“Basic”→“show arrow North”;

Leave it into“forever”block，replicate“show arrow North”for  imes，respectively set to“<span class="mark">North East”, “South East”,
“South West”,“North West”.</span>

![](media/008c4281fabc99c159c52fcf4ab28bf2.png)

Click“Basic”to get block“clear screen”the emain it below the block “show arrow North West”

Drag“pause (ms) 100”block from“Basic”block and set to 500ms, then leav t below“clear screen”block.

![](media/e782704754471e5db06937017e5022d0.png)

Complete Program:


![](media/20fed03d66e92ef565333d6f060b1267.png)

4. Test Result

Upload code 1 and plug in micro:bit via USB cable , we will see the
![](media/d4e278da768e447ed344d581e671f57a.png)icon.

Upload code 2 and plug in micro:bit via USB cable. Micro: bit start howing number 1, 2, 3, 4, and 5, then cyclicall isplay![](media/d4e278da768e447ed344d581e671f57a.png),“Hello!”,
![](media/66b31365d42274ef94ce9a3fcea1cd6c.png),![](media/39fe4029acb5fb675d875c58e382d148.png),![](media/45fcde65eb80a942d3903e400a346587.png),![](media/9e34fdb19d72918bde242994a3c94c1f.png) and![](media/2a45fca9d836ce38674c347c70c81e02.png)patterns.





### Project 4：Programmable Buttons

1. Description

The button can control the on and off of the circuit, which is attache o the circuit. The circuit is disconnected when the button is no ressed. The circuit is connected as soon as it is pressed, but it i isconnected after being released.

Both ends of button are like two mountains. There is a river in between.

The internal metal piece connect the two sides to let the current pass ust like building a bridge to connect the two mountains.

![](media/2ff75a1d81bfe0228b83931a0b7cc860.png)
![](media/d2a204e61c768f18924150db58aee093.png)

-   （Internal Structure）

Working Principle：Before pressing the button, 1, 2 , 3 and 4 ar witched on, but 1, 3 or 1, 4 or 2, 3 or 2, 4 is disconnected (blocked) hich will be on when the button is pressed.

Micro:bit board has three buttons, the reset button is on the back an wo programmable buttons are on the front. Press A, B and AB at the sam ime respectively, and the corresponding screen displays the espectively.

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code 1：

1)  A. Click“Basic”→“show string”;

B. Then place it into“on button A pressed”block, change“Hello!”into“A”.
![](media/aebeefcca33e544db91944881f0a9a68.png)

2)  Copy cod    string![](media/aebeefcca33e544db91944881f0a9a68.png)    tap the drop-down button“A”to select“B”and modify character“A”to“B”.

![](media/6c6bcb6bbeaf8ed55b985e44fc734d61.png)

3)  Copy![](media/aebeefcca33e544db91944881f0a9a68.png)once，an    set to“on button A+B pressed”and“show string“AB”

![](media/3e8bde170db9e02e9cee36b3ede184b7.png)

Complete Code:


![](media/1ad59546b238e9644160019cdb102ee4.png)

Code 2：

1)  A. Click“Led”→“more”→“led enable false”,

B. Put it into the block“on start”，click drop-down triangle button t elect“true”

![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png).

2)  A. Click“Input”→“on button A pressed”.

B. Go to“Variables”→“ change item by 1 ”

C. Place it into“on button A pressed”and 1 is modified into
![](media/81ec128a3a4bb86fed7d2f78bab20447.png)

3)  Duplicate![](media/81ec128a3a4bb86fed7d2f78bab20447.png)cod    string once，click the drop-down button to select“B”，the    set“change item by -5”    ![](media/a53f0e6deb299ba15c494547dec19259.png)

4)  A. Enter“Led”→“plot bar graph of 0 up to 0”

B. Keep it into“forever”block

C. Go to“Variables”to move“item”into 0 box，change 0 into 25.

![](media/3232608700bf086dd0474de156a9116d.png)

5)  A. Go to“Logic”to move out “if...true...then...”and “=”blocks，

B. Keep“=”into“true”box and set to “\>”

C. Select“item”in the“Variables”and lay it down at left box of “\>”，change 0 into 25；

D. Enter“Variables”to drag“set item to 0”block into“if...true..then...” lter 0 into 25.

![](media/75a22c2c7eaf03a6d0ffaadf1d9f2fe9.png)

6)  A. Replicate cod    string![](media/e0de4c7488b48605b292df5d3dd798dc.png)once

B.“\>”is modified into“\<”and 25 is changed into 0.

C. Leave it beneath
![](media/e0de4c7488b48605b292df5d3dd798dc.png)cod tring.

![](media/678059d480a41d372a6b70175b5a3225.png)

Complete Program：


![](media/e2d7143ce59218e14780e9370d973c51.png)

4. Test Result

Upload code 1 and plug in micro:bit via USB cable, press“A”on Micro:bi oard, character“A”will be displayed；in case that B i ressed，letter“B”will appear.“AB”will be displayed if you press A and  uttons simultaneously.

Upload code 2 and plug in board via USB cable. Press button A, th umber of rows lit by the LED dot matrix will increase, when B i ressed, the number of rows lit by the LED dot matrix will decrease.



### Project 5: Temperature Measurement

1. Description

Micro:bit main board doesn’t come with temperature sensor actually, bu etect temperature through built-in temperature of NFR51822 chip hereby, the detected temperature is more close to chip’s temperature.

In this project, we will use the sensor to test the temperature in th urrent environment, and display the test results in the display dat equipment), then set the temperature range detected by the sensor in  ay that controls the LED dot matrix to display different patterns.

![](media/206c8ec1c3f11d2de8d0f42fdf5b6b47.png)

（Temperature Sensor**）**

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code 1：

1)  Go to“Advanced” →“Serial” →“serial redirect to USB”.

Place it into “on start”

![](media/07637ee0425802f6a59eb6f6dd62ea5c.png)

2)  Click“Serial”to drag out“serial write value x=0”.

Move it into“forever”block

![](media/0e709be8f6acc9521f1f76a0fc32c792.png)

3)  Go to“Input” →“temperature(℃)”

Place it into 0 box

Change x into Temperature

![](media/2143a993b073f763a2e770a7eea628d6.png)

4)  Move “pause (ms) 100”from“Basic” block and place it unde    block“serial write.....temperature(℃)”

![](media/0c03bc986e186751ac33b92e5052b26f.png)

Complete Program：

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/e1e316ab2c9727c9b5a36dd82a7ab11a.png)

</td>
</tr>
</tbody>
</table>

Download code 1 to micro:bit board and keep USB cable connected, the ap button
![](media/e0580d7886af95d2a4ea7cd9d40759ff.png):

![](media/0d3198e0cb5460c9820bc2f016c0d7c1.png)

Temperature data is shown below:

![](media/6177222069a9583f2d8314d592fdb916.png)

Through the test, the room temperature is 35℃ when touching the NFR5182 hip of micro:bit; however, the temperature rises to 37℃ when it touche ater cup.

If you don't have a Windows 10 computer, then Google Chrome can't pai evices to read digital or analog signals. Here you can use CoolTer oftware to read the serial port.

Open CoolTerm, click Options to select SerialPort. Set COM port an 15200 baud rate(the baud rate of USB serial communication of Micro:bi s 115200 through the test). Click“OK”and“Connect”.

The serial monitor shows the current ambient temperature value, as show elow:

![](media/b3a18bca1b2a7b5337470735e5a0c5aa.png)

![](media/f78128c148de3862a3fe10d86f063e22.png)

![](media/eb105b8b2f9c1868b586573230718e07.png)

Code 2：

Click“Led”→“more”→“led enable false”into“on start”，click drop-dow riangle button to select“true”
![](media/976aaaf61e578c48e2f00f6d2a3fccc0.png)

Go to“Logic”→“if..true...then...else”and “=” block;

Move“if..true...then...else” into“forever”block，the lace“=”into“true”box.

![](media/28c4cf38fbacb05ca0e457146767757d.png)

Change “=” to“≥”

Go to“Input”→“temperature(℃)”and move it into the left 0 box;

Change 0 into 35.

![](media/2b0e3775540415849bf36f7d118a8599.png)

Tap“Basic”→“show icon”，copy it once and lay down them under the“i ..then” and else blocks, then click the drop-down triangle button t elect“![](media/9fa58029eb504582ee5a915f591ea583.png)”.

![](media/fee3bbacccaebb856bbf2cbbe95a82bf.png)

Complete Program：


![](media/75b4f8dfc29b2a45e718383972ff0dc4.png)

4. Test Result

Upload the code 2 plug in micro:bit via USB cable, when the ambien emperature is less than 35℃, the 5\*5 LED wil how![](media/4b1765e12b413dc5d562f2a16d32392f.png) hen the temperature is equivalent to or greater than 35℃, th attern![](media/f2705fbc4886efcfaac96589ca255f66.png)
will appear.





### Project 6: Compass

1. Description

This project mainly introduces the use of the Micro:bit’s compass. I an be used to determine the direction. We need to calibrate th icro:bit board when magnetic sensor works. The correct calibratio ethod is to rotate the Micro:bit board.

In addition, the objects nearby may affect the accuracy of readings an alibration.

![](media/68b3f54592553e620f6d39f30f90feb9.png)

(Compass)

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code 1：

1)  A. Click“Input”→“more”→“calibrate compass”

B. Lay down it into the“on start”block.

![](media/f0973c3116eb4faf2d4ca138bd057d45.png)

2)  A. Go to“Input”→“on button A pressed”.

B. Enter“Basic”→“show number”, put it into“on button A pressed”block;

C. Tap“Input”→“compass heading(℃)”， and place it into“show number”

![](media/0d9b5a65740d9406848d9a360635982b.png)

![](media/3dac0d4c18fe1334cb76de8a87bf150c.png)

Complet rogram：

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/3dac0d4c18fe1334cb76de8a87bf150c.png)

</td>
</tr>
</tbody>
</table>

Program Description：

Upload the code 1, plug in micro:bit via USB cable and press button A ED dot matrix indicates that“TILT TO FILL SCREEN”. Then enter th alibration interface, the calibration method is: rotate the Micro:bi otherboard to make the screen (LED dot matrix) draw a square (25 LED re on), as shown in the following figure:

![](media/72d895c17cbaf3ecf7735f93128e140e.jpg)

The calibration is finished until you view the smil attern![](media/a4faf86fb027b2f4c3dacaeee5d47d2b.png).

The serial monitor show will 0°, 90°, 180°and 270° when pressing A.

Code 2：

Make micro: bit board point to the north, south, east and wes orizontally , LED dot matrix displays the corresponding directio atterns.

![](media/66c4482e3bcd71e712a54f4d73044104.png)

This code string complies that we read the value detected incessantl nd determine the direction by the value range. The direction is towar orth at this time.

![](media/d1a4e9f62bdf690ba809ae35c347b233.png)

As shown in the figure, if the reading is between 292.5 and 337.5, the ake the display show an arrow pointing to the top right. Since 0. annot be entered in the program, the values are 293 and 338. Then ad ther logical criteria, and you will get the complete program.

Find the instruction blocks:

Enter“Input”→ “more”→“calibrate compass”

Move“calibrate compass”into“on start”

![](media/f0973c3116eb4faf2d4ca138bd057d45.png)

Click “Variables”→“Make a Variable...”→“New variable name：”

Input“x”in the blank box and click“OK”, and the variable “x” i enerated.

Drag out“set x to”into“forever”block.

![](media/0ecd067449d3d52ce3ba751632129b54.png)

Go to“Input”→“compass heading(℃)”, and keep it into “0” box

![](media/a97f7ff675fc62533a9053b6c415652b.png)

Tap“Logic”→“if...then...else”, leave it below block“sex x to compas eading”，the lick![](media/bf972b006ad6d05686352c4785e54994.png)ico or 6 times.

Place“and”into “true” block

Then move“=”block to the left box of “and”

Click“Variables”to drag“x”to the left“0”box, change 0 into 293 and se o“≥”;

Then copy“x≥293”once and leave it to the right“0”box and set to“x\<338”

![](media/cf2d8d1d74b5f485abd4843f92b52672.png)

Go to“Basic”→“show leds”

Lay it down beneath
![](media/6dbd99f5a6e4abe8ffd450d19b8a857b.png)block hen

click“show leds”and the pattern
![](media/eab025b80ef24f1d5351bd3e06221bad.png)appears.

![](media/fe40fd39ae6abce0721d19cf86ef136d.png)

Duplicate
![](media/6dbd99f5a6e4abe8ffd450d19b8a857b.png)for  imes.

Separately leave them into the blank boxes behind“else if”.

Set to“x≥23 and x\<68 ”,“x≥68 and x\<113 ”,“x≥113 and x\<158 ”,“x≥15 nd x\<203 ”,“x≥203 and x\<248 ”,“x≥248 and x\<293 ”respectively.

Then copy“show leds”for 7 times and keep them below the “els f.......then” block respectively.

Click the blue boxes to form th attern“![](media/4c73992fa4dfc6a2735b49ea8f000ed6.png)”,
“![](media/0771b8fd797a3e945a01ec1525ba4a9d.png)”,“![](media/41eb716a282d52483e8467704613d034.png)”,“![](media/2cae18294b329c10ecdefd768d6954e0.png)”,“![](media/14b893d1a7157d72209b975d0df8d890.png)”,“![](media/c362406f55115926523a0f60e16828b6.png)”and“![](media/3977e13fdec2bfbc7fc55f5dce4969a9.png)”.

Complet rogram：![](media/ca4bc854081faf63bb13b2db448fa284.png)

![](media/5e3330d735a144c4a6461ece221db219.png)

![](media/99ec247ce0be9850c92e8fdfc1fc5d63.png)

![](media/2ca9ab458e80a2c3ec7002c15b74235e.png)

4. Test Result

Upload code 2 and keep USB cable connected. After calibration, til icro:bit board, the LED dot matrix displays the direction signs.





### Project 7: Accelerometer

1. Description

The Micro:bit board has a built-in LSM303AGR acceleration senso accelerometer). It has a resolution of 8,10 and 12 bits, and th rogram sets the measuring range to 1g, 2g, 4g, and 8g.

We often use the accelerometer to detect the attitude of machines.

In this project, we will introduce the detection of several specia ostures by the accelerometer, then view the triaxial raw data output b he it.

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code 1：

\(1\) A. Enter“Input”→“on shake”，

B. Click“Basic”→“show number”, place it into“on shake”block, then chang  into 1.

![](media/b86b68744e64e4e9907ccb1fa0cb2af7.png)

\(2\) A. Copy code string
![](media/b86b68744e64e4e9907ccb1fa0cb2af7.png)for  imes;

2.  separately click the triangle button to select“logo up”,“log    down”,“screen up”,“screen down”,“tilt left”,“tilt right”and“fre    fall”, then respectively change 1 into 2, 3, 4, 5, 6, 7, 8.

Complete Program：

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/75e625fbae54fd3d76cf6c4967d87415.png)

</td>
</tr>
</tbody>
</table>

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/3fc45754cb7a060d660212c5cb8c268f.png)

</td>
</tr>
</tbody>
</table>

Code 2：

Check the acceleration value at X, Y and Z axis.

1)  A. Go to“Advanced”→“Serial”→“serial redirect to USB”

B. Drag it into“on start”

![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

2)  A. Enter“Serial”→“serial write value x =0”

B. Leave it into“forever”block

![](media/1dcff6f8c61c0c7ac220ded584bcf988.png)

3)  A. Click“Input”→“acceleration(mg) x”；

B. Keep it into“0”box and capitalize the“x”

![](media/3f132064ad2081eabf6269eb4c0e698b.png)

4)  Go to“Basic”and move out“pause (ms) 100”below th    block![](media/aa23874d61a27c3af5263746851f6fef.png)    then set to 100ms.

![](media/98c688ae175b0c5eca6bed1d95f7b301.png)

5)  Replicate cod    string![](media/c013533f2e3a02f26116f176ba6f975b.png)

for 3 times and keep them into“forever”block，separately set the whol ode string as follows:

![](media/e11b467aef3999050e8a3b5cd175dce9.png)

Complete Program：

![](media/57fec5e7a6bda76b8ddc6c3538b58010.png)

Download code 1 to micro:bit board, keep USB cable connected an lick![](media/e310a9105faecbe6ed8400101a4e852d.png)

![](media/821a64a53c3a9709ff556e71b070f4dd.png)

The coordinates of the Micro:bit accelerometer are shown in th ollowing figure:

![](media/6303a0ac122680207fe856d9be38d01c.png)

It shows the decomposition of acceleration on the X-axis, Y-axis, an -axis, as well as the synthesis of acceleration (the synthesis o ravitational acceleration and other external forces). Then flip th icro:bit board, the data is shown below:

![](media/ded4e05f2b15d694e2061159628574dc.png)

If you don't have a Windows 10 computer, then Google Chrome can't pai evices to read digital or analog signals. Here you can use CoolTer oftware to read the serial port.

4. Test Result

Download code 1 to micro:bit board and plug in power with USB cable hen shake the Micro:bit board, the number 1 appears.

When the logo is up, the number 2 is displayed:

![](media/1600323e3e61e331c248cbeda5ccdcfc.jpg)

When the logo is down, the number 3 is displayed:

![](media/3be80acf957e53117f695801ce19c449.jpg)

When the screen is up, the number 4 is shown.

![](media/5797dd7be9a9c2d3226123e0c29db0bd.jpg)

On the contrary, the number 5 is displayed when the screen is down.

When Micro:bit board is tilt to the left, number 6 is shown.

![](media/326095934bcff0a925b4f9a09d6cf7d2.jpg)

When Micro:bit board is inclined to the right, number 7 is displayed.

![](media/185b0ac204e9b2c54dd8fa93d852568c.jpg)

When it is free fall, number 8 will appear on dot matrix.（Note：w on’t recommend you to make it free fall, it will cause board damage)





### Project 8: Detect Light Intensity

1. Description

This project will introduce how Micro:bit detects the external ligh ntensity. Since Micro:bit doesn’t come with a photosensitive sensor he detection of light intensity is completed through the LED matrix.

The LED matrix is used to sense the surrounding light and repeatedl onverts the LED into input and samples the voltage decay time. Th ight intensity detected is a relative value.

![](media/5bbafad58a34792768c8370e8ee8c2cf.png)

（Light Intensity Area）

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

(1)A. Enter“Advanced”→“Serial”→“serial redirect to USB”;

B. Drag it into“o tart”block.![](media/8c0cfdd76322ebf7febafa519e98b76f.png)

\(2\) A. Go to“Serial”→“serial write value x =0”;

B. Move i nto“forever”![](media/1dcff6f8c61c0c7ac220ded584bcf988.png)

3)  A. Click“Input”→“Light level”

B. Put“Light level”in the“0”box and change “x”to“Light intensity”.

![](media/38447eae9d3e190496b9a24baea6cbe7.png)

4)  A. Click“Basic”→“pause (ms) 100”;

B. Lay it down into“forever”and set to 100ms.

![](media/9ba8558c0d520cc80b01080e437ddff5.png)

Complete Program：

![](media/1ae769b6a1d9f6c6a393351c69b10d32.png)

4. Test Result

Download code to micro:bit board don’t plug off USB cable an lick![](media/e310a9105faecbe6ed8400101a4e852d.png)

![](media/04b472326485cf676cdb4dd61ca6ef1a.png)

The intensity value is 0 when covering the LED dot matrix. And it varie ith the light intensity when placing micro:bit board under th unlight. The stronger the light intensity, the larger the light leve ill be.

![](media/d7f1751ea1e6f251376dee5390ed21fa.png)







### Project 9: Speaker

1. Description

The micro:bit motherboard has a built-in speaker, which makes it ver asy to add a sound to your project. The speaker can be programmed t mit a variety of tones, such as writing a song: Ode to Joy, and pla t.

![](media/ac515b9ae8891dc32f368a29f194a2fb.png)

（ Speaker）

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Enter“Basic”→show icon, put it to the“on start “block

Click the drop-down triangle to select th ![](media/7f7aa904c35f83b61c7c560ad1e40d2a.png) attern.

![](media/d4bbd4b80d9a83f1a69fc49171c7f497.png)

Tap
“Music”→![](media/37c1766cfaa4e801cc115e4f29402dc2.png) ut it to the“on start “block

Enter“Basic”→“pause (ms) 100”, then put it to the“forever“block an hange 100 to 1000.

![](media/5c6d70ea12ce16ca3b12330069d41153.png)

Replicate the cod tring![](media/5c6d70ea12ce16ca3b12330069d41153.png)fo  times, then put it to the“forever“block. Click the drop-down triangl o select

”happy, ”hello”and ”yawn”.

![](media/a3695fa08b3998909ef3a0adcb9d12e0.png)

![](media/7f7aa904c35f83b61c7c560ad1e40d2a.png)Complet rogram：

![](media/8f80ccb8df9d1f6421b1eef99e6a35d5.png)

4. Test Result

Upload the program and plug in micro:bit via a USB cable, then th peaker will emit a sound and the LED dot matrix will display a musi ogo pattern.





### Project 10:Touch-sensitive Logo

1. Description

If you have a micro:bit mainboard, it makes sense to use a gol ouch-sensitive logo as another input in your project, which is like a xtra button. It uses a capacitive touch sensor that detects smal hanges in electric fields when you press (or touch) it with you inger. When you touch it, you can control the micro:bit board t erform certain functions.

![](media/644695850097c5ade080bb4848b4b481.png)

（Touch-sensitive Region）

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

1.  Delete the“on start”and “forever”blocks

2.  Enter“Input”→ “when logo is touched”, then click the drop dow    triangle button to select “is touched”

![](media/1b4d6c1f508ebff66188e89b271c5bf3.png)

3.  Click “Variables”→“Make a Variable”, then enter start in the dialo    box and tap OK to create the variable "start".

Drag the“ set the variable to 0” block from the Variable bar, then pu t to the“when logo is touched” block.

![](media/62ddd23b7e85eb8bfa681319ea7629f4.png)

（4）Enter“Input”→ “more”→ ”[running time](javascript:;)(ms)”, then pu t into the number 0 of the “ set the variable to 0” block.

![](media/7b284c6b49911611de6d113a805ec4af.png)

（5）Tap “Basic”→ “show icon❤”, then put it into the “when logo i ouched”block.

![](media/b25818cde15c99d501c5a97d660dfb79.png)

\(7\) Enter“Input”→ “when logo is touched”→”is released“, then creat he variable“time”in the same way.

Click “Variables”→“ set time to 0”and put it into the “when logo i eleased”block.

Go to “Math”→“0-0”, then put it into the number 0 of the “ set the tim o 0” block.

![](media/03e92d005486d15983383aaee012c0eb.png)

7)  Enter“Input”→ “more”→”[running time](javascript:;)(ms)”, then put i    into the number 0 box on the left side of the “0-0” block.

Click “Variables”→“start”, then put it into the number 0 box on th ight side of the “0-0” block.

![](media/517211f12456f856cd1ddac264953a3a.png)

8)  Tap “Basic”→ “show number”, then put it into the“when logo i    released”block.

Go to “Math”→ “square root 0”, and put it into the 0 box, then click th rop-down triangle button to select the integer ÷.

![](media/8ed4e29f20103ecded03dbd3738c9818.png)

9)  Click “Variables”→“time”, then put it into the 0 box on the righ    side, and change 0 to1000.

![](media/917e527cfca9b078e50d427a993ea7a2.png)

Complete Program：

![](media/548fe7463f2f053e9034c81668ebccae.png)

4. Test Result

Upload the program and plug in micro:bit via a USB cable. Press and hol he "Logo" sign on the mainboard of the micro:bit, then the LED do atrix displays the ❤ pattern, however, numbers will appear at th Logo" sign when we release it.





### Project 11: Microphone

1. Description

The micro:bit motherboard boasts a built-in microphone, which can b sed to measure the ambient sound level. When you clap, the LE ndicator on the micro:bit motherboard will turn on. It can measure th ntensity of sound. In this connection, you can make a sound level char r disco lights that are in tune with the music.

![](media/3073a8af772ab91ecf264843b37d3b74.png)
![](media/7f0741158e734ff8449d5b87d5ba85f4.png)

（Sound input hole of microphone）（Microphone）

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

3. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code 1:

\(1\) Delete the“on start”and “forever”blocks, then enter“Input”to dra u he![](media/8a85a0d9828272b2b6c3df1f0064eca1.png)
block.

Tap “Basic”→ “show icon”, then put it into the “on start”block.

![](media/689f013cf67b32a382a3411627595b4c.png)

\(2\) Replicate the cod tring![](media/689f013cf67b32a382a3411627595b4c.png)，the lick the drop-down triangle button behind "loud" to select "quiet" an hen tap the button behind ❤ to select
![](media/9a40d2f51ed0a372a82e559cdb2ca0dd.png).

![](media/15f18ff78c3bdc76a4cba61e717acdbf.png)

Complete Program：

![](media/cbe84fcb1d33793088efc58708102511.png)

Code 2:

1)  Go to“Advanced” →“Serial” →“serial redirect to USB”

Place it into “on start”

![](media/07637ee0425802f6a59eb6f6dd62ea5c.png)

2)  Click “Variables”→“Make a Variable”, then input maxSound in th    dialog box and tap OK.

Tap “Variables”→“set maxSound to 0”, then put it into the “on start”

block.

![](media/39710c93b9b6be8dadebc511f7c361a0.png)

3)  Tap“Logic”→ “if ..then ...else”, then put it into the “forever” block.

Go to“Input” →“when button A is pressed”, and put it into then.

![](media/4385a22ffd0ee48fa3a7fc8c9587ce41.png)

4)  Click “Basic” →“show number”, and put it behind “if”.

Go to “Variables”→“maxSound”, then put it into number 0.

![](media/fa0490019963f5c77532adce2da388f5.png)

5)  Create the variable“soundLevel”, then drag out the “set soundLeve    to 0”and put it behind “else“.

Go to“Input” →“loudness of sound”, then put it into number 0.

![](media/25a34bce8a8479f11d5c64968690a4b3.png)

6)  Tap“Led”→“plot a bar graph with a value of 0 max 0”, and put i    behind “else“.

Go to “Variables”→“soundLevel”, then put it into 0 behind “the value is“, and change the number 0 behind the max to 255.

![](media/b2eb9a18936af27069b533544dde5703.png)

7)  Tap“Logic”→ “if true...then”, and put it behind “else“.

Go to“Logic”→ “0 \> 0”, and put it into “then”.

Click “Variables”→“soundLevel”, then put it into number 0 on the lef ide.

Enter“Variables”→“maxSound”, then put it into number 0 on the righ ide.

![](media/36419531a05b7c9c780a2bd639810a06.png)

8)  Click “Variables”→“ set maxSound to 0”, then put it behind th    second “if”.

Tap“Variables”→“soundLevel”, then put it into number 0 .

![](media/6f42a865ee1d3661b4b92fc4f8d2ae6b.png)

Complete Program：

![](media/3ce899c4ba3a2bd13db1b3164440a6ad.png)

Download code 2 to micro:bit board and keep the USB cable connected hen tap button
![](media/e0580d7886af95d2a4ea7cd9d40759ff.png):

![](media/e22507af4953df977269bbdb2463d69e.png)

The output data of the serial port will be displayed. When the ambien ound increases, the output sound level of the serial port increases.

![](media/50b81518d9f7925b0c20476ab1f64185.png)

When you press the A button on the micro:bit motherboard, the LED do atrix displays the detected maximum sound level value in th nvironment at this time (Note: reset the maximum value by pressing th eset button on the back of the micro:bit). When applauding, it display he sound level pattern.

4. Test Result

Download code 1 to micro:bit board and keep the USB cable connected hen applauding, the LED dot matrix displays the
❤ pattern. When the outside world is quiet, i ill display the![](media/04fdfc9060943954e7938bb1a741d626.png)attern.





### Project 12: Bluetooth Wireles ommunication

1. Description

Micro:bit board boasts a built-in Bluetooth 5.1 low-power BLE and 2.4GH ntenna, which can be used for Bluetooth and 2.4G wireles ommunication.

In this project, we will connect a cellphone or iPad to Micro:bi otherboard to complete the wireless connection.

![](media/55b2424d88ba1ba8a711c49418ca8dc6.png)

2. Components Needed

<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>

![](media/35c29c989e9d8c6c45aeb31a493efdb1.png)

</td>
<td>

![](media/81bfee2741c94f7e5cb7f8ec66b83945.jpg)

</td>
<td></td>
</tr>
<tr class="even">
<td>Micro:bit * 1</td>
<td>USB Cable * 1</td>
<td></td>
</tr>
</tbody>
</table>

  . Test Code

Download link：<https://microbit.org/get-started/user-guide/mobile/>
（Android can refer to it）

Let's take ios device as an example:

Enter the page：

[https://www.microbit.org/get-started/user-guide/ble-ios/](https://www.microbit.org/get-started/user-guide/ble-ios/)
，tap“Download pairing HEX file”to download the micro:bit firmware t he folder you created or to your desktop, then burn the downloade irmware into the micro:bit motherboard.

![](media/cfaf7f8ae83cbe2636c39162a78adc7f.png)

![k162](./media/k162.png)

Open ![](media/27924fdb3d67692df7c63d8d0fb72287.png)
on an iPhone device (phone /iPad), then search“micro:bit”in APP stor nd click
“![](media/962a57f92b78eea1f0e3e81463497a9c.png)”t nstall the corresponding APP .

![](media/66d1f34d8d4c52e2b7c0ce10e602a063.png)

Pair the Micro:bit motherboard with a cellphone or iPad, then open th luetooth.

After installing APP successfully, click
![](media/ddfd27bdd24da96eb998ccc2e13fcf72.png)t nter app. Plug in Micro:bit motherboard, click“Choose Micro:bit”t tart Bluetooth pairing.

![](media/34f5fbb1c0c371970d1aec6c59c5cbb5.png)

Click“Pair a new Micro:bit”

![](media/e20270a0ade9c00b61198b26fc2fd83b.png)

Press and hold button A and B, then press and release the reset button ED dot matrix will show a pattern. At last, release the button A and  t same time and click“Next

![](media/c00520400ecd1f20f958c1c6d1a3c907.png)
![](media/cabc60d7f8a030f5c9d86ac7de6c7bd7.png)

Make the displayed pattern on Micro:bit board as same as the one o Pad, click“Next”.

![](media/9411a5280e6f3b0d45306a31f80c1b38.png)

Click“Next”and “pair “, after a few seconds, the pairing is successfu nd the LED dot matrix on the micro:bit motherboard displays the "√ attern.

![](media/7b56c56e10415ac2881ac69448b4ad3c.png)
![](media/803cb5cf5f7d595581a11f5e6b7e61ed.png)


![](media/dc570950dd81f427edb5ea58f50b3a7e.png)
![](media/f72e83dc6276d520e82c349659106e1a.png)

After connecting successfully, design code via the APP .

Select“Creat ode”（Click![](media/f4d8d6b0adf0fbc6c098ddf30fe86933.png)and the dialo ox![](media/59567ef7dbca43e8242bc6c6c1f78713.png)will appear ， clic con![](media/5fc22fb58590f911d913ef56a32e8ea1.png)t nter the programming interface.

![](media/d54bf2d1c01cd3c18544009b1f9dc5a0.png)

![](media/f172323d08a303637fc249b41116d226.png)

![](media/81d3e07e2e1a3c34993b1b31dd28429e.png)

![](media/3b349fada94d0b714410c174e4116e1e.png)

Set the code program name to "1", then clic con![](media/a32c2d832ab38d19eb623108143c744e.png)t ave the program.

![](media/a0dc0924b6ef9591b7759d125d325450.png)

Tap“Flash”to enter the upload code program interface. The default cod rogram is the program just saved with the name "1", then click
“Flash”to upload the code program "1".

![](media/c1661720ea2eaa521ff31a778501eb23.png)

![](media/350abcbb09d431d40427f34c3764f2eb.png)
![](media/4863bf826f119805a6a9bf9c12d5ec81.png)

If upload the program successfully, as shown below:

The LED dot matrix on the motherboard displays the jumping "heart attern.

![](media/ebfd31347a0553de0be4e01636652a15.png)




## Microbit Robot Car Tutorial

### Project 13：RGB Module

1. Description

The RGB color mode is a color standard in the industry. It obtain arious colors by changing the three color channels of red (R), gree G), and blue (B) and integrating them. RGB denotes the three colors o ed, green and blue.

The monitors mostly adopt the RGB color standard, and all the colors o he computer screen are composed of the three colors of red, green an lue mixed in different proportions. A group of red, green and blue i he smallest display unit. Any color on the screen can be recorded an xpressed by a set of RGB values.

![](media/afc068defa4e1ef3a0b0c350aba05f26.png)

RGB color mixing is like having red, green and blue lamps. When thei ight is superimposed on each other, the colors are mixed, while th rightness is equal to the sum of the brightness of the three lamps. Th ore mixed, the higher the brightness, therefore, it is often calle even-color LED.

<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 25%" />
<col style="width: 22%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Color</td>
<td>RGB value（R,G,B）</td>
<td>Color</td>
<td>RGB value（R,G,B）</td>
</tr>
<tr class="even">
<td>Black</td>
<td>255,255,255</td>
<td>Red</td>
<td>0,255,255</td>
</tr>
<tr class="odd">
<td>Green</td>
<td>255,0,255</td>
<td>Blue</td>
<td>255,255,0</td>
</tr>
<tr class="even">
<td>Cyan</td>
<td>255,0,0</td>
<td>Dark red</td>
<td>0,255,0</td>
</tr>
<tr class="odd">
<td>Yellow</td>
<td>0,0,255</td>
<td>White</td>
<td>0,0,0</td>
</tr>
<tr class="even">
<td>......</td>
<td>.......</td>
<td>......</td>
<td>......</td>
</tr>
</tbody>
</table>

Since our LED lights are [common anode](javascript:;), 255 is the lowes alue and 0 is the brightest value.

In this project, we are going to make two experiments. One is to mak wo RGB lights light up seven colors of red, green, blue, cyan, purple ellow and white, the other is to make two RGB lights gradually displa ifferent colors.

2. Preparation

（1）Insert the micro: bit correctly into the expansion board

（2）Connect the battery holder to the expansion board

（3）Turn on the power switch（Slide the POWER switch to ON end）

（4）Connect the micro：bit and computer via a micro USB cable

（5）Open the Web version of Makecode

If you choose to load the project by importing the Hex file, you do
not need to manually add the Mini car extension library.

If you want to drag the code manually, add the Mini car extension
library first(you can refer to the "1. Development environment
configuration "file).

3. Schematic Diagram

![](media/85f1916d4a6a4777fe3ced20137a2b08.png)

![](media/dd4476449cac69cd49ab641646d12eb3.png)

Working Principle: Microbit, as the host, sends instructions to th lave STC8G1K08 through the IIC, then the slave outputs PWM to contro GB LED lights. This greatly saves the IO ports of the microbit board or the IIC enables to control two motors and two RGB LED lights.

4. Code Explanation

If you don't add the library file, then the MiniCar bar will not appear.

![](media/108fc4b69cfa85a10620ac1b5743c85a.jpg)

![](media/4d0bbd5f616b57d1994062e7ec33d522.png)Thi s used for color setting, the first option is left and right RG ights, the second option is color, which has "red, green, blue, cyan urple, yellow, white and led off.

![](media/f67c39e81f9525ee226f2870a298fd45.jpg)

![](media/09d6a1904631545eea4b0d875e7cbd6c.jpg)

![](media/51c7e299ef929ba684ed13e97b141c7f.png)Thi s used to set the left RGB LED, you need to select the color, the nput a value from 0 to 255 at PWM. Since our LED lights are [commo node](javascript:;),the lower the pwm value, the brighter the light nd the higher the value, the darker the light.

![](media/6d3334f56cfbd88937c7154b7c49da98.png)

![](media/9ef147f7bf6486f71cf0b3e29f6fe0bd.png)Thi s used to set the right RGB LED

![](media/cd1f6b49019ba04693821af298256fc3.png)Thi s the breathing light display we have written in the library

![](media/64c66da466ad00806745209d9d5f1790.png)Thi an be used to turn off all RGB LED lights. You can assign a value o 55 to the PWM of this lamp if you only want to turn a single light off.

5. Test Code

You can upload the code 1 directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Enter“MiniCar”→“LED OFF”(turn off the front LED so as not to affect th urrent LED program)

![](media/964a745ad40caf57222e60ced6f9061c.png)

Drag out the “set RGB color module”block in the “MiniCar”bar and set i s "LED_R" and "LED_L" respectively, and set the color to "red".

![](media/1778f5b27721cf4548678a7c54047fee.jpg)

Find the delay code block in the "Basic" bar and add it, then set th elay time to 1s.

![](media/443df36d4b979bedd504d5ab5b5f09b6.png)

Add other colors in the same way

Complete Program：

![](media/537b03312998d3808713b6f5d83d7e6c.jpg)

After uploading the code, the RGB LED will switch every second in th rder of red, green and blue.

6. Breathing Lights

The code is as follows:

![](media/2c0965ad43a5d152e65284ec57f075f2.png)

After uploading the code, the RGB LED will be red, and then green, the  mixture of red and green will appear. When the red light is off, th lue light will be on, then a mixture of blue and green will b isplayed.

However, when the green light is off, the red light will be on, then  ixture of blue and red will be shown. In closing the red and blu ights will be off.

7. Expanded Knowledge

1s = 1000ms ； 1ms = 1000us ；1us = 1000nm

Then the 1000 ms we used in the project is 1 s

![](media/512726c47216d19d29ea1643dad4fa46.png)

Maybe you are capable of configuring the light color you want b ourself. You solely need to configure the red, green and blue PWM fo he RGB.





### Project 14: Motor Driving

1. Description

The robot car is equipped with two DC geared motors, which are develope n the ordinary DC motors. It enjoys a matching gear reduction box hich provides a lower speed but a larger torque. Furthermore, differen eduction ratios of the box can provide different speeds and torques.

The reduction motor is the integration of gearmotor and motor, which i pplied widely in steel and machine industry.

Moreover, the car boasts a STC8G1K08 and a HR8833MTE chip. To save th O ports, we send instructions to the STC8G1K08 chip through the IIC o he micro:bit, then the STC8G1K08 chip controls the HR8833MTE chi ccording to the corresponding instructions to control the rotatio irection and speed of the two DC reduction motors (the control proces s as follows).

![](media/bbf95193fbacad7cb587d5b0a3767654.png)

2. Preparation

（1）Insert the micro: bit correctly into the expansion board

（2）Connect the battery holder to the expansion board

（3）Turn on the power switch（Slide the POWER switch to ON end）

（4）Connect the micro：bit and computer via a micro USB cable

（5）Open the Web version of Makecode

If you choose to load the project by importing the Hex file, you do
not need to manually add the Mini car extension library.

If you want to drag the code manually, add the Mini car extension
library first(you can refer to the "1. Development environment
configuration "file).

3. Circuit Diagram

![](media/78b5a35bedaf4ce0b8ad3f850765e4f5.png)

![](media/14397c83373c6ff919baccef6e0a83ec.png)

4. Code Explanation

Drag the motor control module from the MiniCar bar to the programmin rea. If you don't add the library file, then the MiniCar bar will no ppear.

![](media/f378094ab6779f295ef4f2ca6d000c88.png)

Code block for motor control:

![](media/8bfada8422f29ef85022993420902fa8.png)

①：It is used to select AB motors

![](media/0ca197c01d7547f8c2ddb65a02d037f3.png)

②：It is used to select the direction of the motor

![](media/3e44e4eea4e3a71b23c22f7502e8a1af.png)

③：It is used to set the motor speed（range:0~255）. You can manuall nter the speed value or click the mouse under this area to set it.

![](media/18ca6630c9bcb69870b86c493ba3fbce.png)

5. Test Code

You can upload the code directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

The function we want to achieve is to control the car at a speed of 10 o go forward for 1s, go back for 1s, turn left for 1s, turn right fo s and stop for 1s. (combine the "4. Code blocks for motor control utorial)

Step 1：Set the code function to the car forward for 1s

Set“A”“B”motor to“Forward”, and the speed to“100”，then drag out th elay module in the basic bar and set the time to 1s.

![](media/ae6c1b7f2546e100fac48bb32d26348f.png)

Step 2：Set the code function to the car backward for 1s

Set“A”“B”motor to“Backward”, and the speed to“100”，then drag out th elay module in the basic bar and set the time to 1s.

![](media/5b443215144a1cc9650af79ff8fd4b96.png)

Step 3：Set the code function to make the car turn left for 1s

Set motor“A”to“Backward”, and the speed to 100，“B”to“Forward”and th peed to 100，then drag out the delay module in the basic bar and se he time to 1s.

![](media/01e9e5b4de306a0a7a97e8845c71977a.png)

Step 4：Set the code function to make the car turn right for 1s

Set motor“B”to“Backward”, and the speed to 100，“A”to“Forward”and th peed to 100，then drag out the delay module in the basic bar and se he time to 1s.

![](media/769edfa0dc670de39f143af13f6d5d40.png)

Step 5： Set the code function to make the car stop

Set the speed of“A”“B”motor to“0”，and the delay time to 1s.

![](media/226b4d66459ce45b0085b63e695dd631.png)

Complete Program：

![](media/68811c20704283594f7a0e7950ff843a.png)

6. Test Result

Upload the code to the micro:bit board, then turn on the switch at th ack of the car, then the car will go forward for 1s, backward for 1s urn left for 1s, turn right for 1s and stop for 1s.

7. Expanded Knowledge

How to make the motor turn left?

①Set the A motor to backward, the B motor to forward, which is a lef urn at the center of the distance between the two wheels.

②Set the A motor to stop, the B motor to forward, which is a left tur t the center of the left motor.

③Set the AB motors to forward, then set the speed of the motor on th eft to be smaller than that on the right. In this way, the car wil ove to the left when moving forward due to the speed difference, an he greater the speed difference, the greater the deviation.

④Set the AB motors to backward, then set the speed of the motor on th eft to be greater than that on the right. In this way, the car wil ove to the left when moving backward due to the speed difference, an he greater the speed difference, the greater the deviation.

The principle of making the car turn right is the same, you only need t witch the motor.





### Project 15: Light Tracking Smart Car

1. Description

Do you find that the street lights outside will light up when it get ark and goes off at dawn? Next, we will learn the main component tha auses this circumstance, which is "photoresistor".

Working Principle: It is a resistor made by the photoelectric effec f a semiconductor, which is very sensitive to ambient light, thus it esistance value will vary with different light intensity.

We seek to use this feature to design a circuit and generate  hotoresistor module. The signal end of the module is connected to th nalog port of the microcontroller.

When the light intensity increases, the resistance decreases, and th oltage of the analog port rises, that is, the analog value of th icrocontroller goes up. Otherwise, when the light intensity decreases he resistance increases, and the voltage of the analog port declines hat is, the analog value of the microcontroller becomes smaller herefore, we can use the photoresistor to read the corresponding analo alue and sense the light intensity in the environment.

It is commonly applied to light measurement, control and conversion ight control circuit as well.

In this project, we will use the left and right photoresistors t ontrol the car to find the light source.

2. Preparation

（1）Insert the micro: bit correctly into the expansion board

（2）Connect the battery holder to the expansion board

（3）Turn on the power switch（Slide the POWER switch to ON end）

（4）Connect the micro：bit and computer via a micro USB cable

（5）Open the Web version of Makecode

If you choose to load the project by importing the Hex file, you do
not need to manually add the Mini car extension library.

If you want to drag the code manually, add the Mini car extension
library first(you can refer to the "1. Development environment
configuration "file).

3. Circuit Diagram of Photoresistor

![](media/d9b391d95bdb353297c7d65b3319db50.png)

4. Code Explanation

Find "LDR_R" and "LDR_L" under "Photosensitive sensor" in the “Min ar”.

![](media/abd8912fa4d11aa04f4608654cc3eec7.png)

①“LDR_R”code block：It can obtain the value of the right photoresistor.

![](media/f3fd64a540aa9c96581b5059610938c1.png)

②“LDR_L”code block：It can obtain the value of the left photoresistor.

![](media/b654d6fc3e3ee06f122f01a529c6c05a.png)

5. Read the Photoresistor

You can upload the code “1-ReadLight.hex”directly from the tutoria read the "Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Step 1：First, set up a code framework for serial port printing, the ind the "serial redirect to USB" code block in the "Serial" bar, an rag it into the "on start" block.

![](media/392bc5205f6bb62c7bf78720e989b8cd.png)

Step 2：Find the "serial write value" code block in the "Serial" bar nd put it into the“forever”module.

![](media/28fc50d2993f0fed4682e14f01737d96.png)

Enter“LDR_R:”in the “serial write value” block, and put it into th umeric area:

![](media/c9035063b8f17a941735240da6fdc5a1.png)

Add the left photoresistor in the same way, then place a delay of 1s.

![](media/5abbddc736163c6207f7d727abd135a8.png)

Complete Program：

![](media/48d42fd8ed2eead8d19ed1b0ba82f0ac.png)

View the value printed by the serial port if your computer is Window 0.

![](media/2496f93e59b8725e222bad5ea5de1719.png)
![](media/392669a3a91dff8806ecf62bd6aab282.png)

If the operating system is less than Windows 10, the serial port tool i equired for printing. The software installation and tutorial ar ontained in the 3. Cool Term Software folder.

6. Flow Chart

![wps1](./media/wps1.png)

7. Light Tracking Smart Car

Directly upload "2-LightFollow.hex" in the "Programs" folder.

Code“Detect the analog value of photoresistors”

Create two new variables in "Variables" and call them "led_l" an led_r"

![](media/b84fd0e6bee9810ddf146c689a58b22f.png)

Put the two setting variable module under the "forever" and assign th alue of "LDR_L" to "ldr_l" and the "LDR_R" to "ldr_r" respectively.

![](media/2e20c37346d565aeda59834b5b808ef7.png)

Find the "if" module in the "Logic" bar and add it to "forever" .

![](media/5cc7135c9320e7bb2fe2812a83b29463.png)
![](media/8a36cba13ab678fef94f791995ef5caa.png)

Code“The value on the left and the right are both greater than 650?”

Enter "Logic"→ "Boolean"→ "and", then put it into "if" .

![](media/635d1a1b9b44852b463ef48e262976dd.png)
![](media/c0a1bbeefd380646a600cdd6f94ddb19.png)

Tap “Logic”→ “Comparison”→ “=”, then put it into the boxes on eithe ide of "and". Set the “=” on the left to“ldr_r” \> 650, the right “=”
to ldr_l” \> 650.

"ldr_r" and "ldr_l" modules are in the "Varlables" bar. The "=" can b witched to "\>" by clicking the mouse. Input 650 to the left of "=" .

![](media/615c8b9ffcc73eea03efec56dd1bbca6.png)

Code ”The car goes forward ”

If the value on the left and the right are both greater than 650, the he car goes forward. Add the “The car goes forward” code into "if" an et the speed to100.

![](media/623b9e61edd53a04b4fce11d8fb16256.png)

If the condition is not met, "else if" will be executed. Tap![](media/d490e61dfc049e2f9208dcb0f6e564b5.png)twice to add "else if" .

![](media/60d966e315754944877211f154daf971.png)

Code“The value on the left is greater than 650 and the right is les han or equal to 650?”

Tap“ldr_r”statement→“=”，then change it to“≤”

![](media/0799c3b29f2234f0c99d3b803a0cb89e.png)

![](media/7e5a70db2381f3c864721b0ed8ca3408.png)

Code ”The car turns left ”

If the value on the left is greater than 650 and the right is less tha r equal to 650, then the car will turn left. Add the “The car turn eft” code into "else if" and set the speed to 100.

![](media/bf7e9e05d3db146bdfd9071d205d7a75.png)

If the condition is not met, "else if" will be executed. Tap![](media/d490e61dfc049e2f9208dcb0f6e564b5.png) t dd "else if" .

![](media/7b7863151f9676101b1e7c4e501b3051.png)

Code“The value on the left is less than or equal to 650 and the right i reater than 650?”

Tap“ldr_l”statement→“=”，then change it to“≤”

![](media/de5a919d711670c053c36dd9ee899463.png)

![](media/3ae9a27e9aa8302c63a8e9e8d3983037.png)

Code ”The car turns right ”

If the value on the left is less than or equal to 650 and the right i reater than 650, then the car turns right.

Add the “The car turns right” code into "else if" and set the speed t 00.

![](media/033cfb3205171d50d10976aed7b9804d.png)

If the conditions are not met, the car will stop. Add the“The car stops” code into "else”.

![](media/2878f59d0981935632b7e7e4c82e584d.png)

Complete Program：

![](media/d1071911195acae904f1a1aa120809eb.png)

8. Test Result

After uploading the code, turn on the switch on the rear of the car hen you can use the flashlight to play with the car. It’s best used i  relatively dark environment. When the ambient light intensity is abov 50, the car will keep moving.

9. Expanded Knowledge

If you have questions about the code blocks, please tap it:

https://makecode.microbit.org/reference/





### Project 16: Line Tracking Smart Car

1. Description

The car comes with two line tracking sensors and two potentiometers.

Besides, it adopts a TCRT5000 IR tube, which contains an IR emittin ube and an IR receiving tube. When the infrared signals of the emittin ube is received by the receiving tube through reflection, th esistance of the receiving tube will change, which is generall eflected in the voltage change on the circuit.  

The resistance varies depending on the intensity of the infrared signal eceived by the receiving tube, which is often in the color of th eflecting surface and its distance of the receiving tube. At the tim f detection, black is high level active and white is low level active. 

Working Principle: When the car runs above a white road, the I mitting tube installed under the car emits infrared signals to detec he road and the receiving tube will receive signals sending back. The he output end outputs low level(0). When it detects black lines, i utputs high level(1).

Send the detected signal to the I/O port of the microcontroller. When i s high level (1), then the car is on the black line. Similarly, when i s low level (0), then the car is on the white ground.

The two line tracking sensors on the expansion board are controlled b 12 and P13 of the micro bit control board, the left one is controlle y P13, and the right is controlled by P12. Adjust the line trackin ensors, and place the car on a black ground, twist the potentiometer ntil the LED (D3,D2) is on, then adjust them until it is off.

2. Preparation

（1）Insert the micro: bit correctly into the expansion board

（2）Connect the battery holder to the expansion board

（3）Turn on the power switch（Slide the POWER switch to ON end）

（4）Connect the micro：bit and computer via a micro USB cable

（5）Open the Web version of Makecode

If you choose to load the project by importing the Hex file, you do
not need to manually add the Mini car extension library.

If you want to drag the code manually, add the Mini car extension
library first(you can refer to the "1. Development environment
configuration "file).

3. Circuit Diagram

![](media/cdf0c629a6425ff32d8629540d111f38.png)

4. Read the Line Tracking Sensor

You can upload the code “1-ReadSensor.hex”directly from the tutoria read the "Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Step 1：Set up a code framework for serial port printing.

Go to“Serial”→“serial redirect to USB”，then put it into“on start”block.

![](media/392bc5205f6bb62c7bf78720e989b8cd.png)

![](media/6903d5a85a0dd305b4e3f64f216fc9b3.png)

Step 2：Tap“Serial”→“serial write value”, then put it into“forever”.

![](media/28fc50d2993f0fed4682e14f01737d96.png)

Enter“Pins”→“digital read pin P0 ”, then put it at 0 of the“serial writ alue “x”=0”block.

The left line tracking sensor is controlled by P13, and the right i ontrolled by P12. Here we take the right one as an example to read th igital signal.

Click the drop-down triangle button behind P0 to select P12 and chang x" to "digital signal".

![](media/b303c46c21bb74db5b7ec3f1c18791cd.png)

Add a 1s delay

![](media/46f5956588b18e0481e7a78492065780.png)

Check the value printed by the serial port if your computer is Window 0

![](media/2496f93e59b8725e222bad5ea5de1719.png)
![](media/01bddb939ae8623f16bf1a5d20e768f2.png)

If the operating system is less than Windows 10, the serial port tool i equired for printing. The software installation and tutorial ar ontained in the 3. Cool Term Software folder.

5. Flow Chart

![sdad12645r](./media/sdad12645r.png)

6. Description of Line Tracking Sensor

If you don’t add the library file, then“MiniCar”will not appear.

![](media/767e09ed8f3075f2d9ea57f4061035ed.png)![](media/6317163f734a04b65216bb53aa96615f.png)

“Line Tracking”is used to eliminate complex judgment expressions.

<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 18%" />
<col style="width: 21%" />
<col style="width: 23%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Value of Line Tracking</td>
<td>P13(Left）</td>
<td>P12（Right）</td>
<td>State of the car</td>
</tr>
<tr class="even">
<td>1</td>
<td>0</td>
<td>1</td>
<td>turn right</td>
</tr>
<tr class="odd">
<td>2</td>
<td>1</td>
<td>0</td>
<td>turn left</td>
</tr>
<tr class="even">
<td>3</td>
<td>1</td>
<td>1</td>
<td>go forward</td>
</tr>
<tr class="odd">
<td>0</td>
<td>0</td>
<td>0</td>
<td>stop</td>
</tr>
</tbody>
</table>

7. Test Code

You can upload the code “2-TrackingSmart.hex”directly from the tutoria read the "Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code”Read the return value of the sensor”

Enter“Variable”bar to create a“value”variable, and put “set th alue”module into“forever”.

![](media/ea182e3741bb9600dd169b5c75dc3a48.png)
![](media/365a421b1cd6fb066b8658160f60f195.png)

Tap“Mini Car”→“Line Tracking”, and put it at 0 of the “set th alue”module .

![](media/02cac5028453a08c3acdaa47f8e1fe5f.png)
![](media/401d5b5f53b63892a57a0df2be3f7a65.png)

Code”Judge if the value=1”

Go to“Logic”→“if”, then put it into “forever”.

![](media/c5fffdfa65d38d719142ec95bafc24f3.png)

Tap“Logic”→“=”, then put it into true of“if”module.

![](media/f4b28773c2bd0e2cb942d2e6c6382e10.png)
![](media/f1b9d1f46cbbeeb5c2dd2350882c6ec6.png)

Enter“Variable”→“value”, and put it in the left side of “=”, then inpu umber 1 at the right side of “=”.

![](media/f49008d66c309f1d2108b0bdbfddc7d5.png)
![](media/1e9155b35b5495a7eb2afe80398dba8d.png)

Code”The car turns right”

If the value is equal to 1, the car will turn right.

Add ”The car turns right”code into "if" module and set the speed to 7 if you have any questions about the car drive, please refer to Projec 4)

![](media/c991d387aa5ceac779e6b575452129f6.png)

if the value is not equal to 1, "else if" will be executed, then click![](media/d490e61dfc049e2f9208dcb0f6e564b5.png)twice to add it.

![](media/79d76946d2dcd97bbd218ea395d3ebe0.png)

Code”Judge if the value=2”

Replicate the "=" code block into the "else if" diamond box and chang he number to "2" at the right side of the "="

![](media/80d4cc35378a3681d42c28d0ccc5e337.png)

Code”The car turns left”

If the value is equal to 2, the car will turn left.

Add ”The car turns left”code into "else if" and set the speed to 70.

![](media/cf2d411ed316aace0e5baff4d9a7490a.png)

If the value is not equal to 2, "else if" will be executed, then click![](media/d490e61dfc049e2f9208dcb0f6e564b5.png) t dd it.

![](media/474ec5eab338b15b60e27d2a7be52915.png)

Code”Judge if the value=3”

Replicate the "=" code block into the "else if" diamond box and chang he number to "3" at the right side of the "="

![](media/15b927a76f2dec6a8f3f685c5eb6913d.png)

Code”The car goes forward”

If the value is equal to 3, the car will go forward.

Add ”The car goes forward”code into "else if" and set the speed to 70.

![](media/7998f1860283791f051285388cc0ab18.png)

Code”The car stops”

If none of the above conditions are met, the stop code in else will b xecuted.

![](media/2338a751ab47157b2c850a5f55f65bf9.png)

Complete Program：

![](media/3973fbd93fd9abaf0e912d6824b3c71c.png)

8. Test Result

Upload the code and open the power switch on the car. Place the car o he line tracking paper, then it will follow the black line to move.





### Project 17: Ultrasonic Following and Obstacl voidance

1. Description

The ultrasonic sensor uses sonar to determine distance to an object lik ats do. It will emit the ultrasonic waves after trigger signals. Whe he ultrasonic waves encounter the object and are reflected back, th odule will output an echo signal, thus, it can determine the distanc f object from the time difference between trigger signal and ech ignal.

As the picture shown, it is like two eyes. One is transmitting end, th ther is receiving end.

![](media/69a8202b74cc5e35d712315eab88e95d.png)

In this project, we will learn ultrasonic ranging, ultrasonic followin nd ultrasonic obstacle avoidance.

2. Specifications

- Working voltage：DC 3.3V-5V

- Working current：50mA－100mA，normally is 65mA

- Maximum power：0.5W

- Maximum detection distance：3m

- Blind spot：less than 4cm

- Sensing angle：less than 15 degrees

- Interface：4pin interface with a spacing of 2.54mm

- Positioning hole ：3mm diameter

- Working temperature： -10℃ - +60℃

- Dimension：49mm\*22mm\*19mm

3. Working Principle

![](media/8ff02741199a0f03d8d814a4b72f27d7.png)

(1)Pull down TRIG then trigger high level signals with least 10us;

(2)After triggering, the module will automatically send eight 40KH ltrasonic pulses and detect whether there is a signal return;

(3)If there is a signal return, when ECHO outputs a high level, then th uration of the high level is the time from transmission to reception o he ultrasonic waves. Then test distance = high level duration
\*340m/s\*0.5. 

4. Preparation

（1）Insert the micro: bit correctly into the expansion board

（2）Connect the battery holder to the expansion board

（3）Turn on the power switch（Slide the POWER switch to ON end）

（4）Connect the micro：bit and computer via a micro USB cable

（5）Open the Web version of Makecode

(6 ) Install the ultrasonic to the expansion board

If you choose to load the project by importing the Hex file, you do no eed to manually add the Mini car extension library.

If you want to drag the code manually, add the Mini car extensio ibrary first(you can refer to the "1. Development environmen onfiguration "file).

5. Code Explanation

If you don’t add the library file, then“MiniCar”will not appear.

![](media/901dbabd853fb4d640a07d55a63250ef.png)

“Ultrasonic "can be used to obtain the distance of ultrasonic induction 14 is Trig and P15 is Echo.

6. Code for Ultrasonic Ranging

Upload the“code-1.hex”file directly from the tutorial

Complete Program：

![](media/12aeec27b62cc73fe5460c9fb9e28829.png)

Check the value printed by the serial port if your computer is Window 0

![](media/b9675eeca2dd343d766cfad11d36635b.png)

If the operating system is less than Windows 10, the serial port tool i equired for printing. The software installation and tutorial ar ontained in the 3. Cool Term Software folder.

7. Flow Chart of Ultrasonic Following

![asdf74752](./media/asdf74752.png)

8. Code for Ultrasonic Following

You can upload the code “code-2.hex”directly from the tutorial (read th Development Environment Configuration" file if in doubt).

Or add the code blocks manually:

Code ”Assign the value detected by ultrasonic to distance“

Create a new variable named "distance" and assign the value measured b he ultrasonic sensor to it.

![](media/347b7d95751d75915fbc9899c078c1e9.png)

Add“if”block

![](media/dd85b494f8b4ccce13a5cf37b76ecb1c.png)

Code ”Distance≥10 and≤30?“

Add "and" to the condition box of the "if" block, and add "=" to bot ides of "and" , then change the left "=" to "distance ≥ 10", the "=" o he right to "distance ≤ 30".

![](media/6cc986ddc46e8acec93713676c647f3d.png)

Code ”The car goes forward“

If distance≥10 and≤30, then the car goes forward.

Add the ”The car goes forward“ Code into “if“, and set the speed to 100.

![](media/e9f5380d08f01064b8c9b24d8bd99be7.png)

If the condition is not met, "else if" will be executed, then click![](media/e5c4f6f7facf6b6bcb9ae02a5e970311.png)twic o add it.

![](media/4f86773bd8f48ed558761c997b87994e.png)

Code ”Distance≤ 6?“

Add "=" into else if and set it to“distance ≤ 6”

![](media/d78541532c751183cd3611b4a8705e8b.png)

Code ”The car goes backward“

If distance≤6, then the car goes backward.

Add the ”The car goes backward“ Code into “else if“, and set the spee o 100.

![](media/f9d75b497dd644ba6c2deb43164e0668.png)

If the condition is not met, "else if" will be executed, click![](media/e5c4f6f7facf6b6bcb9ae02a5e970311.png) t dd it.

Code ”Distance \>6 and \<10 or \>30?“

Add“or”block into else if, then add “distance ＞ 30”at “or”on the righ ide.

![](media/624ee7483d695cd7fcec914b9162cf22.png)

Add“and”to the right side of“or”![](media/fa087c032df76025fea532c192390f5b.png)

Add“＞”to the left side of “and”, add “＜”to the right side

![](media/e922e6da508d35d38067b1f821b7c7f3.png)

Set the left side of the "and" code block to "distance \> 6" and th ight side to "distance \< 10".

![](media/984354b88d3bad74d3f9cc16a62aa400.png)

Code ”The car stops“

If distance \>6 and \<10 or \>30, the the car will stop.

Add Code ”The car stops“ into else if and set delay time to 300ms.

![](media/f6fadc592ff4bbb0f67e4d182c7284e2.png)

Tap![](media/1b16d0a48bb1490dfbb63dad934c92a4.png)to delete the else

Complete Program：

![](media/af951ebdffe8775239e10df33fe26a51.png)

  . Flow Chart of Ultrasonic Obstacle Avoidance

![das1321561](./media/das1321561.png)

10. Code for Ultrasonic Obstacle Avoidance

Upload the code“code-3.hex” directly from the tutorial

Code ”Assign the value detected by ultrasonic to distance“

Create a new variable named "distance" and assign the value measured b he ultrasonic sensor to it.

![](media/ef4b5412cc8fa2b541cf9c7453f16928.png)

Code ”Distance \>10？“

Add if code block and set the condition to distance \>10

![](media/6776653123da527213e61e5c82165a14.png)

If the distance \>10, then the car will go forward.

Add the speed to 70

![](media/0a65e5a40d6fc11daa6c3e33b30542e2.png)

If the condition is not met, click
![](media/e5c4f6f7facf6b6bcb9ae02a5e970311.png) t dd else, and add the car turns left code to it and set the speed to 70 elay in 200ms.

![](media/b8f1205dcea3b0ba93f5f4c2dcbdcb59.png)

Complete Program：

![](media/077446d4d95e0e95f33a5ebbed7b17ab.png)

Upload the code and open the power switch on the car. If there is a bstacle in front of the car within 10cm, the car will turn left.





### Project 18: IR Remote Control Smart Car

1. Description

There is no doubt that infrared remote control is ubiquitous in dail ife. It is used to control various household appliances, such as TVs tereos, video recorders and satellite signal receivers. It is compose f infrared transmitting and infrared receiving systems, that is, a nfrared remote control, an infrared receiving module and a single-chi icrocomputer capable of decoding.​

![](media/9980b41f57feddc2e8a9c0346afaaea9.png)

The 38K infrared carrier signal emitted by remote controller is encode y the encoding chip in the remote controller. It is composed of  ection of pilot code, user code, user inverse code, data code, and dat nverse code. The time interval of the pulse is used to distinguis hether it is a 0 or 1 signal and the encoding is made up of these 0,  ignals.

The user code of the same remote control is unchanged. The data code ca istinguish the key.

When the remote control button is pressed, the remote control sends ou n infrared carrier signal. When the IR receiver receives the signal he program will decode the carrier signal and determines which key i ressed. The MCU decodes the received 01 signal, thereby judging wha ey is pressed by the remote control.

Infrared receiver we use is an infrared receiver module. Mainly compose f an infrared receiver head, it is a device that integrates reception mplification, and demodulation. Its internal IC has complete emodulation, and can achieve from infrared reception to output and b ompatible with TTL signals. Additionally, it is suitable for infrare emote control and infrared data transmission.

The infrared receiver module on the expansion board of the car i ontrolled by the P16 of the micro bit control board.

2. Specifications

- Working Voltage：3.3-5V（DC）

- Interface：3PIN

- Output Signal：Digital signal

- Receiving Angle：90 degrees

- Frequency：38khz

- Receiving Distance: about 5m

3. Circuit Diam

![](media/82380b0176cb9fe4bfdd49a9d1cbe771.png)

4. Preparation

（1）Insert the micro: bit correctly into the expansion board

（2）Connect the battery holder to the expansion board

（3）Turn on the power switch（Slide the POWER switch to ON end）

（4）Connect the micro：bit and computer via a micro USB cable

（5）Open the Web version of Makecode

If you choose to load the project by importing the Hex file, you do no eed to manually add the Mini car extension library.

If you want to drag the code manually, add the Mini car extensio ibrary first(you can refer to the "1. Development environmen onfiguration "file).

5. Code for Receiving IR Signal

Upload the code“code-1.hex” directly from the tutorial

Or add them manually:

Put the IR pin setting into “on start”, and set the pin to P16

![](media/66f971c3d894c70a366f1b1b9fcf90a1.png)

Complete Program：

![](media/bc43a75d7139e369bd3b21d8c4d5416e.png)

Check the value printed by the serial port if your computer is Window 0

![](media/6f6d10b9111646cfce14df639638b4ed.png)

If the operating system is less than Windows 10, the serial port tool i equired for printing. The software installation and tutorial ar ontained in the 3. Cool Term Software folder.

Through the obtained values, we made an key value table for the infrare emote control:

![](media/db524e7e2d5a77652948837ed70a1310.jpg)

6. Flow Chart

![sdasd5626](./media/sdasd5626.png)

7. Code for IR Remote Control Smart Car

Upload the code“code-2.hex” directly from the tutorial

Or add them manually:

Code ”Assign the signal received by the IR receiver to Value”

Put the IR pin setting into “on start”, and set the pin to P16, the reate a variable named value.

![](media/66f971c3d894c70a366f1b1b9fcf90a1.png)
![](media/ccaf5750fb3b4c6c637fcf0560dd1928.png)

Assign the value received of the IR receiver to Value in“forever”

![](media/c94ab9223a321e460e2e274a913b0c09.png)

Add “if”into “forever”, then tap![](media/d4c8ea2b5d017f1cdbdb40cb6d8959ba.png) fo  times, then click![](media/863a4037d988e8ad92a2aa77e71c68b8.png).

![](media/5b01ecea8b5360ed8821723d655d2df1.png)

Enter“value = 70”in the first if box，then add the car goes forwar ode, set the speed to 100.

![](media/4309386c8ecdfbee09d76200dfc07f3d.png)

Enter“value = 68”in the second if box，then add the car turns left code et the speed to A：70，B：130.

![](media/2bacc3ee2e6b8b5189cc8bebd9b9f51d.png)

Enter“value = 67”in the third if box，then add the car turns right code et the speed to A：130，B：70.

![](media/5c7444427f21351f03ad36593c22db4a.png)

Enter“value = 21”in the next if box，then add the car goes backwar ode, set the speed to 100.

![](media/f2765576edccbdcfe312e36a4ab0f878.png)

Enter“value = 64”in the last if box，then add the car stops code, se he speed to 0.

![](media/c3da504040c231150fe32871452f79a9.png)

![](media/3503275940a903daf4adf4e60ae94a9e.png)

After uploading the code, then we can use the IR remote control t ontrol the car to move.





### Project 19: Multi-purpose Bluetooth Smar ar

1. Description

The micro:bit control board boasts a Bluetooth, which enables to contro nd communicate with the micro:bit. Furthermore, it supports bot ndroid and IOS devices (phones and ipads) and the micro:bit can sen ignals back to a mobile phone or computer via it.

Moreover, it can communicate with the mobile phone Bluetooth APP, whic s a software that empowers to control the micro:bit external device.

In this project, we will learn its interface and function of every ico nd use it to connect the Bluetooth of the micro:bit in a way that read he control characters sent by each button.

![](media/55b2424d88ba1ba8a711c49418ca8dc6.png)

- （Bluetooth Antenna and Chip）

2. Preparation

（1）Insert the micro: bit correctly into the expansion board

（2）Connect the battery holder to the expansion board

（3）Turn on the power switch（Slide the POWER switch to ON end）

（4）Connect the micro：bit and computer via a micro USB cable

（5）Open the Web version of Makecode

If you choose to load the project by importing the Hex file, you do no eed to manually add the Mini car extension library.

If you want to drag the code manually, add the Mini car extensio ibrary first(you can refer to the "1. Development environmen onfiguration "file).

3. Add the Library File of Bluetooth

Tap“Extensions”

![](media/d9ca2854c8ae1c8c2755195b94204e19.png)

Enter "bluetooth" in the search box, then click the first bluetooth luetooth and radio can not work together due to micro:bit hardware hus their extension libraries are incompatible. When you install th luetooth extension library, please remove the radio extension.

![](media/45c291a8927d49a90afbcf1dfe1bec8e.png)![](media/055833c42aa09b5bccd723e637b6b7a6.png)

4. Code for Bluetooth Receiving Data

Import the“Read-the-data-of-Bluetooth-1.hex” file

Or you could edit code step by step in the editing area.

1)  Enter“Advanced” →“Serial” → “serial redirect t    USB”

Place it into“on start”

![](media/73b63660eb8f378dea4930f354d04de6.png)

2)  Click“Bluetooth”→“on bluetooth connected”

Go to“Basic”to move“show icon”block into“on bluetooth connected” block.

![](media/501b8068bafd00adcf138a2b828835d9.png)

3)  Click“Variables”→“Make a Variable...”→“New variable name：”dialo    box.

Input“connected” and click “OK” to create variable“connected”.

Drag“set connected to 0” under block “show icon” and change 0 into 1.

4)  Go to“Loops”to move block“while true do...”into“on bluetoot    connected”block.

Enter“Logic”to drag out “=”block.

Click“Variables” to drag “connected” into left box of “=” block an hange 0 into 1.

![](media/665a62b4895ca45f82d3ebc88e885bce.png)

5)  Then we generate variable“rec_data”in same way.

Then drag out“set rec_data to 0”and place it into block“whil onnected=1 do...”block.

Click“Bluetooth” →“more” →“bluetooth uart read until new line( )”

Keep it into 0 box and click triangle button to select \#.

![](media/e993122756294214c561f660c3df07ea.png)

6)  Go to“Advanced”→“Serial”→“serial write string”

Move it below“set rec_data...until#” block

And combine variable“rec_data”with“serial write string”block.

![](media/6effc725f7d85e4a72afbcee102cc478.png)

7)  Click“Advanced” →“Serial” →“serial write line” and edit code strin    as follows:

![](media/5d66f2053f858d7a3f2e0af55bcc0f0f.png)

8)  Go to“Bluetooth”→“on bluetooth disconnected”

Copy“show icon”block and keep it into block“on bluetooth disconnected”

Click triangle button t elect“![](media/25e0341e063286ff7828c15f09ae0ade.png)”pattern.

![](media/689000dc16e8fb32f0d9918445aae4c1.png)

Complete Program

![](media/9ced4bb5984def272efaa65bb315644b.png)

Click “Setting”→“Project Settings”, and input“Read the data o luetooth”, then set No Pairing to on.(Only drag code blocks manuall equires this operation)

![](media/ee2b0ac1337206993b954209931be8dd.png)
![](media/09767d5efdc8f05fdb331b5ae6d352b5.png)

Check the value printed by the serial port if your computer is Window 0

![](media/eeefed32a1c90b2f58335fa24915d6e8.png)S

If the operating system is less than Windows 10, the serial port tool i equired for printing. The software installation and tutorial ar ontained in the 3. Cool Term Software folder.

5. Download APP

Android System：

Find "keyes mini car" in the Google Store

Tap install

IOS System：

Open App Store

Search keyes mini car，then download the APP to your phone.

![](media/4f1bf3e69998025b0988b11cf921d3b5.png)

6. Introduction of APP

![](media/eed1c874b5c56780ad8318aea33a141c.png)

①Click“connect” to find“BCC micro:bit”Bluetooth.

If "is connected" is displayed, the connection is successful

![](media/11a8165a0156cbe1684b67cfe4bbc080.png)

![](media/dc9cc5a47342ab29c4fc8ddee5c7e6e6.png)

②Disconnect the Bluetooth

③It is used to control the car to go forward. Press:“F” Release:“S”

④It is used to control the car to turn left. Press:“L” Release:“S”

⑤It is used to control the car to turn right. Press:“R”Release:“S”

⑥It is used to control the car to go backward. Press:“B”Release:“S”

⑦This is the button of car function mode. After clicking, four pattern ill appear, as follows:

![](media/2e003113c115018ddae6ff78055b3af6.png)

The first is obstacle avoidance button, the second is following button he third is the line tracking button, the fourth is the light trackin utton.

⑧It is used to control the RGB，tap it then colors will appear：red reen, blue，yellow， cyan，purple and black.

![](media/be436c329eda53e075d969859c02397e.png)

⑨It is used to control the speaker，tap it then piano keys will appear：

![](media/66fbb4e385f5456417aff58c1c40ec56.png)

<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 22%" />
<col style="width: 57%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Letter</td>
<td>Sound</td>
<td><a href="javascript:;">Numbered Musical Notation</a></td>
</tr>
<tr class="even">
<td>C</td>
<td>D0</td>
<td>1</td>
</tr>
<tr class="odd">
<td>D</td>
<td>RE</td>
<td>2</td>
</tr>
<tr class="even">
<td>E</td>
<td>MI</td>
<td>3</td>
</tr>
<tr class="odd">
<td>F</td>
<td>FA</td>
<td>4</td>
</tr>
<tr class="even">
<td>G</td>
<td>SO</td>
<td>5</td>
</tr>
<tr class="odd">
<td>A</td>
<td>LA</td>
<td>6</td>
</tr>
<tr class="even">
<td>B</td>
<td>SI</td>
<td>7</td>
</tr>
</tbody>
</table>

7. Flow Chart

![](media/f8b601d67252f51ebe9cc6320a36d9a7.png)

8. Code for Multi-purpose Bluetooth Smar ar

This part of the code is a combination of the previous projects:

![](media/c8390c6e8b5fbd5cf20ed09b806bad34.png)

Code Explanation：

“Q”: Obstacle avoidance mode “W”: Following mode

“E”: Line tracking mode “T”: Light tracking mode “A”: Stop mode

“LED OFF“ module is used to clear the LED status of the previous code

If the bluetooth is disconnected, the micro：bit wil isplay![](media/0ee444ecbb1bf66c4b679c795e65e72e.png)

If the bluetooth is connected, the，micro：bit wil isplay![](media/acf4e02083c01a9bc54a4a9664ac9ff1.png)

The control function is used for Bluetooth controls car. If th luetooth receives the character "F", the car will go forward . You ca lick the arrow on the right to check the code

![](media/5fa1549976bff5e2b8b7d27de2301f23.png)

1\. LED_RGB function is used to control the RGB LEDs. When receivin r", LED will be red, if "g" appears, it will be green, when receivin b" , it will be blue, when receiving "y" , it will be yellow, whe eceiving "c", it will be cyan, when receiving "p", it will be purple hen receiving "x" , it will be off.

2\. LightFollow function is used for light tracking

3\. Music function is used to control the speaker. When receiving“1” he buzzer will sound“DO”，when receiving“2”, it will sound“RE”，whe eceiving“3”, it will sound“MI”，when receiving“4”, it wil ound“FA”，when receiving“5”, it will sound “SO”，when receiving“6”, i ill sound“LA”，when receiving“7”, it will sound“SI”，when receiving“8” t will sound“DO”，when receiving“9”, it will won’t work..

4\. LineTracking function is used for line tracking

5\. Avoid function is used for obstacle avoidance

6\. UltrasonicFollow is used for following

7\. Speed buffer function is used for speed buffer. The car move orward suddenly in the static state, the head of the car will be lifte ue to the inertia, thus a buffer action of speed is needed (no buffe s needed if the speed is below 100).

